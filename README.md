# ブロック崩し (raylib)

## 実行方法
- raylib がインストール済みである必要があります
- `make run` でビルドと実行が行えます．
  - 上記の方法のほかに `make` でビルドし，`./pong` で実行できます．
  - `make clean` でビルド成果物を削除できます．
- 実行時に `NotoSansMono-Regular.ttf` と3つの `.wav` ファイルが同じディレクトリに必要です．
- 終了するにはウィンドウの閉じるボタンを押してください．
  - ファイルを開放し終了するまでに時間がかかる場合があります．

## 操作方法
- 1/2/3 または ↑↓でレベルを選択しEnterを押すか，マウスクリックで開始できます．
- 左右キー または A・D でパドルを移動できます．
- ゲーム開始後に Space を押すとボールが発射されます．
- P を押すことで一時停止/再開できます．
- CLEAR/OVER 画面では Enter でメニューに戻ります．

## 機能
- 難易度別の複数のレベルを用意しました．
  - EASY ではブロックが少なく，不利になるようなアイテムが出ないようになっています．
  - NORMAL ではバランスの取れたレベル構成になっています．
  - HARD ではブロックが多く，高速ボールやライフの減少が多く，壊せないブロックが登場します．
- 壊せるブロックをすべて破壊することでクリアとなります．
- 単調にならないように複数のブロックタイプを用意しました．
  - 通常ブロック: 白色
  - 機能ブロック: 色付き，アイテムを落とす
    - 水色: M（マルチボール）
    - 緑色: E（パドル幅拡張）
    - 黄色: S（スローボール）
    - オレンジ色: F（高速ボール）
    - ピンク色: L（ライフ追加）
    - 赤色: X（ライフ減少）
  - 壊せないブロック: 濃い灰色
- 機能ブロックに当たると対応したアイテムが落ちてきます．
  - M: マルチボール（最大2個追加）
  - E: パドル幅拡張（リセットまで持続）
  - S: スローボール（一定時間）
  - F: 高速ボール（一定時間）
  - L: 残りのライフを1つ追加
  - X: 残りのライフが1つ減る
- レベルやアイテムによりボールの速度が変動します．
  - レベルが上がるほど基本速度が速くなります．
  - アイテムによる速度変化は時間経過で元に戻ります．
- BGM/効果音がついています．
- ブロックに当たって崩れる際にはパーティクルと画面揺れのエフェクトが発生します．

## 工夫したところ
- パドルの当たり位置で反射角度が変わるようにし動作が単純にならないようにしました．
- ブロック破壊時にパーティクルと画面揺れを入れることでゲームらしさを出しました．
- メニューにボタン型 UI を用意し，キーボードとクリックの両方に対応しました．
- 授業で学んだ構文を積極的に活用しました．
  - `typedef`+`struct` を併用し，Ball/Brick/Particle などの関連データを1つの型にまとめて記述を簡潔化しました．
  - `enum` を使って GameState/PowerType を定義し，状態管理を分かりやすくしました．

## 課題点
- 速度変化の残り時間や効果中の表示がないので，状態が分かりにくく，特にスローボールが解除される際には突然早くなるのでわかりやすい表示をつけてもいいかもしれないと思っています．
- マルチボール時の視認性や情報量が増えるため，UI をもう少し工夫できる気がしています．
- アイテムがランダムに出てくるブロックを作成することで，よりゲーム性が高まると考えています．

## 使っている素材
- フリー音声
  - `background.wav`
  - `gameclear.wav`
  - `gameover.wav`
- フリーフォント
  - `NotoSansMono-Regular.ttf`
